## ساخت بک اند برای لینک ساب ربات CFW.

در این رپو، نحوه ایجاد یک لینک بک اند اشتراک (استخر آی‌پی لینک ساب) subscription link برای استفاده در ربات CFW-BOT رو توضیح میدم. و همچنین سعی میکنم تا بک اندی که در فایل `ips.txt` به شکل پیشفرض هست روتین آپدیت کنم. ولی با توجه به پابلیک بودن این رپو حتما توسط فیلتر چی دائما فیلتر میشه.

میتونید ربات رو از این صفحه نصب کنید:
[اینجا](https://github.com/NiREvil/CFW-BOT)

## آموزش 
> روش اول

برای پیدا کردن آی‌پی تمیز متناسب با سرویس دهنده اینترنت خودتون راه و روش‌های مختلفی هست، من چندتا از اون‌ها رو که بهترین نتیجه رو دارن و همچنین آسون هستن رو می‌نویسم.

اولین روش ک بهترین هم هست به نظرم استفاده از اسکنر آی‌پی [وحید فرید](https://t.me/vahidgeek/173) هست، خود چینی ها و روس ها هم ازش استفاده میکنن، نحوه استفاده اش بینهایت سادست، یه فایل زیپ هست ک باید دانلود کرده و در دستگاه خود چه گوشی اندرویدی چه ویندوز اون رو از حالت زیپ خارج کرده و کلیک کنید روی فایل index تا داخل مرورگر باز بشه، سعی کنید همیشه در اسکنر پروتکل رو روی Http قرار بدید برای عملکرد بهتر،
پورت هم باید روی 80 باشه، تاخیر مجاز رو بیارید پایینتر، پیشفرض بر روی 600 قرار داده شده، 300 میتونه انتخاب خوبی باشه، فقط درصورتی این عدد رو بیشتر کنید که بعد از دو دقیقه از شروع اسکن بهتون هیچ آی‌پی نده در خروجی، اونموقع بذارید روی 400، این عدد 400 معنیش اینه که آقای اسکنر شما اسکن بکن و فقط اون آی‌پی هایی رو در خروجی برام نمایش بده که پینگ اونها کمتر از 400 باشه، بیشتر از 400 بود رد کن بره نمیخواممممم.
گزینه تعداد آی‌پی دلخواه خودتونه، تا هزارتا میشه تعیین کرد
عبارت منظم، و گزینه های بعدی نیاز به تغییر ندارن، 
وقتی به حد نصابی که تعیین کردید رسید یعنی اون تعداد آی‌پی ک خواستید رو پیدا کرد متوقف میشه و مینویسه تمام شد، دقیقا زیر نوشته‌ی تمام شد سه تا ایکون دیده میشه، ایکون وسطی رو ولش کنید ایکون سمت چپ که با فرمت csv هست رو بزنید لیست آی‌پی ها دانلود و ذخیره میشه براتون، توی هر مدیریت فایلی ک هستید اگر اون مدیریت فایل قادر به باز کردن فرمت csv نبود اصلا اهمیتی نداره کافیه تغییر نام فایل رو بزنید و بجای csv. بنویسید txt. و ذخیره کنید و فایل براتون باز بشه. این روش اول بود، 
<p align="center">
  <br><img src="https://github.com/NiREvil/workers-cloudflare/blob/main/Other/pics/CFW%202.png" width="480px">
</p>

------

## آموزش روش دوم

و همچنین از این اپلیکیشن خوب اندرویدی هم میشه واسه اسکن و تست آی‌پی ها استفاده کرد، به این صورت که خودش چندتا رنج آی‌پی داره و میتونی تعداد آی‌پی مورد نیازت رو بهش بگی و از لیست خودش بگرده پیدا کنه تست کنه، و نتایج رو از خروجی برداری استفاده کنی.
یه راه دیگه اش اینه ک ازش سواستفاده کنی برای حالت تست کردنش، یعنی اینکه دوتا فایل تکست برنامه رو که توش رنج آی‌پی ها هستن رو برداری حذف کنی و آی‌پی فله‌ای هایی ک از هرجایی پیدا کردی رو داخل اون فایل قرار بدی و بگی برات تست بگیره و به ترتیب بهتر بودن پینگ ها برات لیست کنه.

لینک دانلود [cloudflare ip tester](https://github.com/xianshenglu/cloudflare-ip-tester-app/releases/tag/0.6.1)
    
اتفاقا همین کار رو برای ویندوزم میشه انجام داد، پروسه عین اندروید 
لینک دانلود [CloudflareST](https://github.com/hoseinnikkhah/CloudflareSpeedTest-English)


## نکته

تنها نکته ای که تو اسکنر ها باید دقت کرد خاموش بودن وی‌پی‌ان هستش، چون اسکنر داره با نت شما اسکن میکنه از آی‌پی ها تست میگیره گ، ما میخوایم توی ایران کار بکنه این آی‌پی، وقتی فیلترشکن شما روشن باشه فرضا روی انگلیس باشه آی‌پی های متناسب برای انکلیسی ها براشون در خروجی ظاهر میشه 🖐😂 پس یادتون نره خاموش کنید.


## و اما روش سوم 

ربات ی ب خ عزیز هم میتونه یه منبع خوب برای آی‌پی تمییز کلادفلر باشه، حتما یه سر بهش بزنید. همه آی‌پی ها دسته بندی شده و مرتب هستند
آی‌دی ربات تلگرام آی‌پی کلادفلر yeBeKhe:
[@cfcleanipbot](https://t.me/cfcleanipbot)



## و درنهایت ایجاد بک اند اشتراک CFW (IP_API)

1.یک فایل متنی در هر سرویسی که میتواند برای شما لینک عمومی ایجاد بسازید. برای این آموزش من از گیت هاب استفاده می کنم.

2.یک فایل .txt با نام دلخواه خود ایجاد کنید.

3.هر آی‌پی باید در خط جداگانه باشد، می توانید از فایل ips.txt در این ریپو به عنوان راهنما استفاده کنید.

4.اگر پورتی برای آیپی تعیین نکنید. از پورت 443 به عنوان پورت پیش فرض استفاده خواهد شد. الگوی زیر را استفاده کنید :
```bash
ip:port#اسم کانفیگ
```

5.فایل را ذخیره کنید و پیوند خام فایل .txt خود را دریافت کنید، فقط روی RAW در بالای فایل کلیک کنید و لینک آن را از مرورگر خود کپی کنید.

6.به ربات بروید و دکمه‌ی Subscription ips را انتخاب کنید


   ![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/88cbdc47-4035-4c40-83be-b1c8144258d0)



7.دکمه change را انتخاب کنید و لینک RAW فایل خود را وارد کنید.

   ![image](https://github.com/2ri4eUI/CFW_Worker_Sub/assets/139592104/434228b5-e677-4955-9d98-50cd8f3c7da8)



انجام شد🎉. از این به بعد، هر کاربری که میسازید بک-اند جدید و اختصاصی شما را برای ساخت ورکر لینک اشتراک استفاده میکند. 

## به روز رسانی لینک اشتراک با آی پی های جدید 
برای دریافت به روزرسانی ها در بک اند IP_API، فقط کافی لینک ساب خودتون رو در همان کلاینت که با آن به کانفیگها متصل میشید به روز رسانی کنید (تمام کلاینت ها مانند v2rayng یا nekobox یا Hiddify و ... که استفاده می کنید، این گزینه آپدیت را دارند). تغییرات انجام شده در فایل بک اند معمولاً بعد از 3 تا 5 دقیقه در لینک اشتراک قابل استفاده میشوند.
