[فارسی](https://github.com/2ri4eUI/CFW-BOT/blob/main/README-FA.md) 
[ENGLISH](https://github.com/2ri4eUI/CFW-BOT/blob/main/README.md)
# CFW-BOT
ربات ورکر کلادفلر! بدون نیاز به سرور، به راحتی میتونید هر تعداد کانفیگ Xray بسازید،  به راحتی در PythonAnywhere اجرا می شود. یک مسیرکوتاه به آزادی اینترنت! ✨

![image](https://github.com/2ri4eUI/CFW-BOT/assets/139592104/8db90fe5-dd6e-4015-840e-5df58ff5f12e)

![image](https://github.com/2ri4eUI/CFW-BOT/assets/139592104/2512c617-b93a-48ac-a6a9-58bdd5fb67c6)
## آموزش در یوتیوب : 
[![YouTube Video](https://img.youtube.com/vi/ejgTbf_yJJQ/0.jpg)](https://www.youtube.com/watch?v=ejgTbf_yJJQ)

## فهرست مطالب
- [این چیه؟](#این-چیه؟)
  - [ویژگی‌ها](#ویژگی‌ها)
  - [پیش‌نیازها](#پیش‌نیازها)
  - [نصب آسان](#نصب-آسان)
  - [نصب عادی](#نصب_عادی)
  - [نجوه استفاده از ربات](#نحوه-استفاده-از-ربات)
- [نکته](#نکته)
- [توضیح](#توضیح)

# این چیه؟
این ربات تلگرام پایتون با استفاده از ورکر کلادفلر ساخت کانفیگهای  Xray را آسان می کند! نیازی به راه‌اندازی‌های پیچیده سرور نیست، فقط این مراحل ساده را دنبال کنید تا شروع کنید:

## در ورژن 0.0.2 چه چیزهایی اضافه شد ؟ 
- لینک اشتراک برای هر کاربر
- پشتیبانی لینکهای اشتراک از IP_API که میتوانید تنها با قرار دادن آی پیهای جدید در لحظه اشتراک را به روز رسانی کنید
- حل مشکل ساپورت نکردن سایتهای پشت کلودفلر ( البته همچنان از آی پی سالم استفاده کنید که توسط کلودفلر فلگ نشده باشد )
- قابلبیت تغییر لینک API از داخل خود ربات
- حل مشکل نصب نشدن پیش نیازها بر روی PythonAnyWhere
  ## در ورژن 0.04 چه چیزهایی اضافه شده؟
  - اضافه شدن لینک اشتراک سینگ باکس
  - دکمه انتقال به صفحه ورکر
  - دکمه انتقال جهت تعویض ساب دامین
  - بارگذاری مجدد ورکرها با پروکسی جدید
  - اضافه شدن صفحه ویکی در بات برای حل مشکلات شما
  - حل برخی از باگها
## ویژگی‌ها
- **راه‌اندازی آسان**: بدون نیاز به هیچ سروری قابل اجرا بر روی محیطهای رایگان پایتون مانند PythonAnyWhere. 
- **پایگاه داده**: از SQLite برای مدیریت پایگاه داده استفاده میکند، به این صورت همیشه به لیست کاربران و لینکهای آنها در خود ربات دسترسی دارید . 
- **مدیریت کاربر**: ایجاد و مدیریت چندین کاربر به آسانی. هر کاربر به پیوندهای تولید شده خود در هر زمان دسترسی دارد.
- **راه‌اندازی بهینه**: با استفاده از Wrangler میتونید با سرعت کاربران خود را بسازید و آن را بر روی کلادفلر اجرا کنید

 ## پیش‌نیازها
- یک دامنه ثبت‌شده در کلادفلر
> بدون دامنه هم ممکنه، با دامنه ی خود وورکر (workers.dev) ولی عملکردش قرار نیست عالی باشه
- دسترسی به حساب کلادفلر
- توکن ربات تلگرام (دریافت از `BotFather` تلگرام)
- توکن API کلادفلر `API Tokens`
- آی دی بخش وورکرز اکانت کلادفلر `Account id`
- آی دی عددی اکانت تلگرامی که می‌خواهید از ربات بر روی اون اکانتتون استفاده کنید (ربات فقط برای اکانت ارائه شده کار خواهد کرد)

## نصب آسان 
در صورت بروز خطا و اجرا نشدن از پروسه نصب عادی پیروی کنید.
```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/NiREvil/CFW-BOT/main/install.sh)"
```

## نصب عادی
1. یک حساب رایگان در [PythonAnywhere](https://www.pythonanywhere.com) بسازید.
2. توکن‌های مورد نیاز رو بدست بیارین و همه رو یکجا یادداشت کنید لازمشون داریم.
   - توکن ربات تلگرامی ایجاد شده توسط ربات [BotFather](https://t.me/BotFather)
   - توکن API کلادفلر از داشبورد کلادفلر (تو قسمت سرچ داخل کلادفلر تایپ کنید `api tokens`. میتونید از الگوی پیشفرض `Edit Cloudflare Workers` استفاده کنید و فقط به اون دسترسی `EDIT` رو در همه بخش‌ها بدید)
   - آی‌دی عددی اکانت تلگرامتون رو می‌تونید از طریق این بات ب دست بیارید: [@useridinfobot](https://t.me/useridinfobot) و یا هر بات مشابه دیگه‌ای که می‌شناسید.
   - آی‌دی اکانت کلادفلر را می‌تونید از سمت راست صفحه وورکرز در کلادفلر پیدا کنید
4. در وبسایت [PythonAnywhere](https://www.pythonanywhere.com) در صفحه داشبورد؛ تب فایل‌ها را انتخاب کرده و بر روی `Open Bash Consol here` کلیک کنید.
5. حالا که توکن های مورد نیاز رو آماده کردید، می‌تونیم بریم برای اجرای کد و رباتمون. در مرحله اول پروژه را کلون کنید با دستور:
 ```bash
 git clone https://github.com/NiREvil/CFW-BOT.git
  ```
6. به پوشه پروژه برید :
```bash
cd CFW-BOT
```
7. فایل  requirement.sh را به حالت اجرایی در بیارید و آن را اجرا کنید:
```bash
 chmod +x requirement.sh
 ./requitement.sh
```
   "اگر به مشکلاتی در اجرای requirement.sh در PythonAnywhere همچنین برخورد کردید، کنسول را با `close` ببندید و وارد منوی Files شده و فایل requirement.sh را باز کنید سپس با `ctrl+s` آن را ذخیره کرده و ببیندید و مجدد آن را اجرا کنید. این بار به خطایی برخورد نمیکنید ."
   اگر همچنان مشکل ادامه داشت تنها کافی است فایل `requirement.sh` را با dos2unix کانورت کنید از آنجایی که سایت PythonAnyWhere از این ابزار پشتیبانی نمیکند میتونید برای اینکار از `dos2unix.py` که در پوشه پروژه قرار دارد استفاده کنید و سپس مجدد فایل `requirement.sh` را اجرا کنید.
```bash
python3 dos2unix.py
```
8. فایل پایتون install.py را اجرا کنید، این فایل با پرسیدن مقادیر API و یوزر آیدی تنظیمات لازم را برای شروع اجرا بات به صورت خودکار انجام میدهد.
```bash
 python3 install.py
 ```
   9. حالا میتونید بات را اجرا کنید:
 ```bash
 python3 cfw.py
 ```

## نحوه استفاده از ربات
وقتی ربات در حالت اجراست، فقط کافیست یک کاربر جدید در تلگرام بسازید.
برای ساخت کاربر جدید و تنظیم ساب دامنه نیازی به تنظیم کردن ساب دامنه از قبل ندارید، به صورت خودکار هر مقداری از ساب دامنه که اجرا کنید وارد میشود. ولی حتما باید دامنه آن از قبل در کلادفلر ست شده باشد.
مانند هر ورکر دیگری برای اتصال نیاز به پروکسی کلادفلر دارد ، که میتواند آی پی یا وب سایتی باشد که پشت کلادفلر است . 
## پیدا کردن آی‌پی یا دامنه کلادفلر
شما از هر روشی که بلد هستید میتونید استفاده کنید (آموزش های بیشتر در رابطه پیدا کردن با آی‌پی تمییز به بخش بعدی برید، دو پاراگراف پایین تر [ایجاد بک اند](https://github.com/NiREvil/CFW-BOT/blob/main/CFW_Worker_Sub.md)).

## پیدا کردن آسان proxyIP
برای بدست آوردن آسان و سریع پروکسی‌آی‌پی مخصوص داخل وورکر پیشنهاد میکنم به این آموزش مراجعه کنید. [ده ها پروکسی آی‌پی جدید در کمتر از 60 ثانیه](https://github.com/NiREvil/vless/blob/main/sub/ProxyIP.md)
## نکته
این ربات به صورتی نوشته شده تا ارزان و سبک باشد و بر پلتفرم رایگانی مانند PyhtonAnyWhere حتی بعد از رد کردن ریت لیمیت آن قابل اجرا بماند. 

## آموزش ایجاد بک اند مخزن آی‌پی تمیز کلادفلر

آموزش ایجاد مخزن آی‌پی تمیز کلادفلرو و بک اند برای لینک ساب ربات رو هم یاد بگیرید چون مخزن پیشفرض در معرض دید عموم قرار داده و فیلترچی میتونه کارش رو یکسره کنه، ده دقیقه ای برای خودتون رو بسازید حرفه ای پر گودرتتت  🤪
[ساخت بک اند برای لینک ساب ربات CFW](https://github.com/NiREvil/CFW-BOT/blob/main/CFW_Worker_Sub.md)

## توضیح

اگر بعد دوهفته یکماه یه موقع دیدید که ربات کار نمی‌کنه و به درخواست‌های شما هیچ پاسخی نمیده قطعا بخاطر سایت pythonanywhere هستش، لازمه که برید توی سایت و bash console رو باز کنید، فقط دقت کنید اگر صفحه کنسول خالی بود نیاز نیست تمام دستورات رو از ابتدا اجرا کنید نه اصلا، از قبل کلون شدن فایل‌ها، پیش نیازها نصب شدن و آماده ان، فقط کافیه که با دستور:
```bash
cd CFW-BOT
```
وارد دایرکتوری شده و سپس
با ارسال این دستور چک می‌کنه اگر آپدیت‌ جدیدی وجود داشت اون‌‌ها رو از مخزن گیت‌هاب کپی و اعمال میکنه روی دستگاه:
```bash
git pull
```

و در نهای با دستور ربات رو اجرا کنید.
```bash
python3 cfw.py
```

## آپدیت ربات به نسخه آخر
> **مورد مصرف:** موقع از کار افتادن کنسول پایتون یا نیاز به آپدیت کردن کد ربات به نسخه آخر از تک دستور زیر استفاده میکنیم:

با این دستور وارد فولدر ربات شده و مخزن گیت‌هاب پروژه رو چک کرده در صورت مشاهده تغییرات در هرکدام از فایل‌ها؛ آن ها را در سورس دستگاه اعمال کرده و در نهایت بات را اجرا میکند.
```bash
cd CFW-BOT && git pull && python3 cfw.py
```



### توضیحات [توسعه دهنده پروژه](https://github.com/2ri4eUI)
ورکر استفاده شده در فایل `index.sh` توسط من نوشته نشده و نویسنده اصلی آن را متاسفانه نمیشناسم. بعد از جستجو در بین ورکرهای موجود از این استفاده شده است، ولی بات قابلیت تنظیم شدن با ورکرهای جدید را دارد که تنها باید 
جهت استفاده در بات کمی تغییر داده شود.

این پروژه تنها شروع است و جای زیادی برای توسعه دارد. مسلما توجه شما نسبت بهش انگیزه من را برای ارتقا دادنش افزایش میده. 
ایده هایی برای آینده 
- گرفتن پشتیبان از پایگاه داده
- تعیین محدودیت زمانی یا در صورت امکان حجمی برای کاربران
- استفاده از اسکریپتهای ورکر مختلف
- اتصال به گیتهاب برای ایجاد لینک اشتراک
- نمایش اطلاعات پروکسی کلادفلر، مانند لوکیشن آن


همیشه از ایده های جدید شما استقبال میکنم.🍀
   
   
